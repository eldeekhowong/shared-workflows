name: EITS Mule Pipeline

on:
  workflow_call:

env:
  current_branch: ${{ github.ref_name }} 

jobs:
  Feature-Branch-Commit:
    #if: ${{ GITHUB.event_name != 'pull_request' }}
    if: ${{ startsWith(GITHUB.ref_name,'feature/') && GITHUB.event_name == 'push'}}
    uses: eldeekhowong/shared-workflows/.github/workflows/build-test.yml@main
    secrets: inherit
    with:
      build-test: 'test-only'

jobs:
  Develop-Merge:
    #if: ${{ GITHUB.event_name != 'pull_request' }}
    if: ${{ GITHUB.ref_name == 'develop' && GITHUB.event_name == 'pull_request'}}
    uses: eldeekhowong/shared-workflows/.github/workflows/build-test.yml@main
    secrets: inherit
    with:
      build-test: 'build'